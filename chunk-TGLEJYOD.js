import{a as I}from"./chunk-WLATS2GY.js";import{a as ce}from"./chunk-O6HUJUFT.js";import{a as te}from"./chunk-K3XYVYMS.js";import"./chunk-N272B2L6.js";import{b as ie,c as h,e as re,f as ne,j as oe,k as le,l as se,m as ae,o as ue,q as de}from"./chunk-SBFXS3HP.js";import"./chunk-PGVUU3PM.js";import{a as Z}from"./chunk-7V6ATNCQ.js";import{j as ee}from"./chunk-YTUW7NAK.js";import"./chunk-WLXDAXNX.js";import"./chunk-4YRY4IP2.js";import{$ as Y}from"./chunk-IWL4SBPM.js";import"./chunk-76PM3GX2.js";import"./chunk-R6THOTYF.js";import{c as X}from"./chunk-S5MVYYKB.js";import{k as J,m as K}from"./chunk-H7UAIGYQ.js";import{$b as $,Ac as z,Bb as f,C as N,Eb as H,Hb as S,Jb as k,Kb as L,Lb as i,Mb as n,N as M,Nb as a,Rb as _,Ub as b,V as w,Vb as p,_ as j,_b as R,ac as q,db as s,ea as A,eb as C,ec as u,g as F,gc as v,ia as G,jc as U,kc as Q,lc as O,nc as P,o as T,oc as g,pc as E,ta as c,tb as D,ua as m,uc as W,va as x,wa as y}from"./chunk-L7ST2L6E.js";var B=class o{http=A(X);cache=new Map;buildsUrl=`${Z.apiUrl}buildings/List`;GatAllBuilds(){return this.http.get(this.buildsUrl)}GetBuildsList(){return this.cache.has(this.buildsUrl)?(console.log("Returning cached buildings list"),new F(r=>{r.next(this.cache.get(this.buildsUrl)?.body),r.complete()})):this.http.get(this.buildsUrl,{observe:"response"}).pipe(M(2),w(r=>{this.cache.set(this.buildsUrl,r)}),N(this.handleError))}clearCache(){this.cache.clear(),console.log("Buildings list cache cleared")}handleError(r){console.error("Error fetching buildings list:",r);let e="Something went wrong! Please try again later.";return r.error instanceof ErrorEvent?e=`Client-side error: ${r.error.message}`:e=`Server-side error: ${r.status} - ${r.message}`,T(()=>new Error(e))}static \u0275fac=function(e){return new(e||o)};static \u0275prov=j({token:o,factory:o.\u0275fac,providedIn:"root"})};var he=["complexDiv"],be=()=>({width:"25rem"}),ve=()=>({name:"Name",label:"Name",type:"text"}),xe=()=>({name:"Description",label:"Description",type:"text"}),_e=()=>({name:"AddressInDetails",label:"Address In Details",type:"text"}),we=()=>({name:"MapSearchText",label:"Map Search Text",type:"text"}),ye=()=>({name:"Type",label:"Type (Integer) only 0 or 1 ",type:"number"}),Ce=()=>({name:"VillageId",label:"Village ID (Integer)",type:"number"}),Se=(o,r,e,t,l,d)=>[o,r,e,t,l,d],pe=o=>["/Admin/Dormitories/build-details",o],ke=o=>({"border-red-500":o});function Le(o,r){if(o&1){let e=_();i(0,"div",9)(1,"div",15)(2,"div")(3,"div",16)(4,"h5",17),u(5),n(),a(6,"img",18),n(),i(7,"div",19)(8,"p"),u(9),n()()(),i(10,"div",20)(11,"button",21),b("click",function(){let l=c(e).$implicit,d=p();return m(d.confirmDelete(l.buildingId))}),a(12,"span",22),i(13,"span",23),a(14,"i",24),i(15,"span"),u(16,"Delete"),n()()(),i(17,"button",25),a(18,"span",26),x(),i(19,"svg",27),a(20,"path",28),n(),u(21," View Details "),n()()()()}if(o&2){let e=r.$implicit;s(5),v(" ",e.name," "),s(4),v("ADD: ",e.address,""),s(8),f("routerLink",E(3,pe,e.buildingId))}}function Ee(o,r){if(o&1){let e=_();i(0,"div",9)(1,"div",15)(2,"div")(3,"div",16)(4,"h5",17),u(5),n(),a(6,"img",18),n(),i(7,"div",19)(8,"p"),u(9),n()()(),i(10,"div",20)(11,"button",21),b("click",function(){let l=c(e).$implicit,d=p();return m(d.confirmDelete(l.buildingId))}),a(12,"span",22),i(13,"span",23),a(14,"i",24),i(15,"span"),u(16,"Delete"),n()()(),i(17,"button",25),a(18,"span",26),x(),i(19,"svg",27),a(20,"path",28),n(),u(21," View Details "),n()()()()}if(o&2){let e=r.$implicit;s(5),v(" ",e.name," "),s(4),v("ADD: ",e.address,""),s(8),f("routerLink",E(3,pe,e.buildingId))}}function Be(o,r){if(o&1&&(i(0,"div",32),u(1),n()),o&2){let e=p().$implicit;s(),v(" ",e.label," is required. ")}}function Ve(o,r){if(o&1&&(i(0,"div",14)(1,"label",29),u(2),n(),a(3,"input",30),D(4,Be,2,1,"div",31),n()),o&2){let e=r.$implicit,t=p();s(),f("for",e.name),s(),v(" ",e.label," "),s(),f("type",e.type)("id",e.name)("formControlName",e.name)("ngClass",E(7,ke,t.f[e.name].invalid&&(t.f[e.name].dirty||t.f[e.name].touched))),s(),f("ngIf",t.f[e.name].invalid&&(t.f[e.name].dirty||t.f[e.name].touched))}}function De(o,r){if(o&1){let e=_();i(0,"button",33),b("click",function(){c(e);let l=p();return m(l.visible=!1)})("click",function(){c(e);let l=p();return m(l.form.reset())}),x(),i(1,"svg",34),a(2,"path",35),n(),y(),i(3,"span",36),u(4,"Cancel"),n()(),i(5,"button",37),b("click",function(){c(e);let l=p();return m(l.visible=!1)})("click",function(){c(e);let l=p();return m(l.onSubmit())}),x(),i(6,"svg",38),a(7,"path",39),n(),y(),i(8,"span",36),u(9,"Save"),n()()}}var me=class o{constructor(r,e,t){this.buildsListService=r;this.fb=e;this.CraetebuildService=t;this.form=this.fb.group({Name:["",h.required],Description:["",h.required],AddressInDetails:["",h.required],MapSearchText:[""],Type:[null,[h.required,h.pattern("^[0-1]+$")]],VillageId:[null,[h.required,h.pattern("^[0-9]+$")]]}),this.buildsListService.GatAllBuilds().pipe(w(l=>{this.buildingsList=l.data,this.normalBuildings=this.buildingsList.filter(d=>d.type==="Normal"),this.hotelBuildings=this.buildingsList.filter(d=>d.type!=="Normal"),setTimeout(()=>{I(this.complexDiv,.9)})})).subscribe()}complexDiv;visible=!1;form;buildingsList=[];normalBuildings=[];hotelBuildings=[];ngAfterViewInit(){this.complexDiv.changes.subscribe(()=>{I(this.complexDiv,.9)})}showDialog(){this.visible=!0}get f(){return this.form.controls}onSubmit(){if(this.form.valid){let r=new FormData;for(let e in this.form.value)r.append(e,this.form.value[e]);this.CraetebuildService.CreateBuild(r).subscribe({next:e=>{console.log("Building created successfully:",e),this.visible=!1,this.buildingsList.push(e.data),this.normalBuildings=this.buildingsList.filter(t=>t.type==="Normal"),this.hotelBuildings=this.buildingsList.filter(t=>t.type!=="Normal"),this.form.reset()},error:e=>{console.error("Error creating building:",e)}})}else this.form.markAllAsTouched(),this.visible=!0}confirmDelete(r){this.CraetebuildService.DeleteBuild(r).subscribe({next:e=>{console.log("Building deleted successfully:",e),this.buildingsList=this.buildingsList.filter(t=>t.buildingId!==r),this.normalBuildings=this.buildingsList.filter(t=>t.type==="Normal"),this.hotelBuildings=this.buildingsList.filter(t=>t.type!=="Normal")}})}static \u0275fac=function(e){return new(e||o)(C(B),C(ae),C(ce))};static \u0275cmp=G({type:o,selectors:[["app-list"]],viewQuery:function(e,t){if(e&1&&R(he,5),e&2){let l;$(l=q())&&(t.complexDiv=l)}},standalone:!0,features:[P],decls:24,vars:19,consts:[["footer",""],[1,"mx-3"],[1,"relative","inline-flex","items-center","justify-center","px-6","py-3","overflow-hidden","text-black","transition-all","duration-300","shadow-lg","cursor-pointer","bg-gradient-to-r","from-indigo-600","to-purple-600","rounded-xl","hover:shadow-xl","group","hover:from-purple-600","hover:to-indigo-600","focus:outline-none","focus:ring-4","focus:ring-indigo-300",3,"click"],[1,"absolute","inset-0","w-full","h-full","transition","duration-300","ease-out","transform","translate-x-full","bg-white","group-hover:translate-x-0","opacity-10"],["fill","none","stroke","currentColor","stroke-width","2","viewBox","0 0 24 24",1,"w-5","h-5","mr-2","transition-transform","duration-300","transform","group-hover:rotate-90"],["stroke-linecap","round","stroke-linejoin","round","d","M12 4v16m8-8H4"],[1,"relative","z-10","text-sm","font-semibold","tracking-wide","uppercase"],[1,"text-center"],[1,"grid","grid-cols-3","lg:grid-cols-4","max-[430px]:grid-cols-1","xss:grid-cols-1","md:grid-cols-2","gap-y-0","gap-x-3"],[1,"p-2","rounded-lg","card","maincolor","hover:shadow-lg","hover:shadow-gray-500/50"],[1,"mt-10","text-center"],[1,"flex","justify-center","card"],[3,"visibleChange","visible","modal"],[1,"max-w-3xl","p-8","mx-auto","space-y-6","bg-white","shadow-2xl","rounded-3xl",3,"ngSubmit","formGroup"],[1,"space-y-2"],[1,"flex","flex-col","justify-between","h-full","overflow-hidden","border","rounded-lg","shadow-md"],[1,"px-4","py-2","card-header"],[1,"text-lg","font-semibold","text-center","maintext"],["src","../assets/images/build.png","alt","Building image",1,"object-cover","w-full","mt-2","rounded-md"],[1,"px-4","py-2","card-body"],[1,"grid","w-full","grid-cols-1","gap-2","px-4","pb-4"],[1,"relative","inline-flex","items-center","justify-center","px-6","py-2","overflow-hidden","font-semibold","text-white","transition-transform","duration-300","ease-in-out","bg-red-600","rounded-full","shadow-lg","cursor-pointer","group","hover:scale-110","hover:-rotate-1","hover:bg-red-700","hover:shadow-red-500/50","focus:outline-none",3,"click"],[1,"absolute","inset-0","w-full","h-full","transition","duration-300","ease-out","scale-125","bg-red-500","opacity-0","group-hover:opacity-100","blur-sm"],[1,"relative","z-10","flex","items-center","space-x-2"],[1,"text-white","pi","pi-trash"],["type","button","aria-label","View Details",1,"relative","inline-flex","items-center","justify-center","px-6","py-3","overflow-hidden","font-semibold","text-white","transition-all","duration-300","ease-out","shadow-lg","cursor-pointer","group","bg-gradient-to-r","from-indigo-500","to-blue-600","rounded-xl","hover:shadow-xl","hover:from-indigo-600","hover:to-blue-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500","active:scale-95",3,"routerLink"],[1,"absolute","inset-0","w-full","h-full","transition","duration-500","ease-in-out","transform","scale-105","opacity-0","bg-gradient-to-br","from-blue-400","to-indigo-600","group-hover:opacity-20"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5","mr-2","text-white","transition-transform","duration-300","group-hover:translate-x-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12H3m0 0l4-4m-4 4l4 4m13-4h-6"],[1,"block","text-sm","font-bold","text-gray-700",3,"for"],[1,"w-full","px-4","py-3","transition","duration-300","border","border-gray-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-indigo-500",3,"type","id","formControlName","ngClass"],["class","text-sm text-red-500",4,"ngIf"],[1,"text-sm","text-red-500"],[1,"inline-flex","items-center","justify-center","px-6","py-3","text-gray-700","transition","duration-200","ease-in-out","bg-gray-200","shadow-sm","cursor-pointer","hover:bg-gray-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-gray-400",3,"click"],["fill","none","stroke","currentColor","stroke-width","2","viewBox","0 0 24 24",1,"w-5","h-5","mr-2","text-gray-600","transition-transform","duration-300","transform","group-hover:scale-110"],["stroke-linecap","round","stroke-linejoin","round","d","M6 18L18 6M6 6l12 12"],[1,"text-sm","font-semibold","tracking-wide","uppercase"],["type","submit",1,"relative","inline-flex","items-center","justify-center","px-6","py-3","text-white","transition","duration-300","ease-in-out","shadow-md","cursor-pointer","rounded-xl","hover:shadow-lg","group","focus:outline-none","focus:ring-4","focus:ring-blue-300",2,"background-color","#012a5b",3,"click"],["fill","none","stroke","currentColor","stroke-width","2","viewBox","0 0 24 24",1,"w-5","h-5","mr-2","transition-transform","duration-300","transform","group-hover:scale-110"],["stroke-linecap","round","stroke-linejoin","round","d","M5 13l4 4L19 7"]],template:function(e,t){if(e&1){let l=_();i(0,"section",1)(1,"button",2),b("click",function(){return c(l),m(t.showDialog())}),a(2,"span",3),x(),i(3,"svg",4),a(4,"path",5),n(),y(),i(5,"span",6),u(6," Create "),n()(),i(7,"h3",7),u(8,"Normal Builds - \u0627\u0644\u0633\u0643\u0646 \u0627\u0644\u0637\u0644\u0627\u0628\u064A \u0627\u0644\u0639\u0627\u062F\u064A"),n(),i(9,"div",8),k(10,Le,22,5,"div",9,S),n(),i(12,"h3",10),u(13,"Hotel Builds - \u0627\u0644\u0633\u0643\u0646 \u0627\u0644\u0641\u0646\u062F\u0642\u064A"),n(),i(14,"div",8),k(15,Ee,22,5,"div",9,S),n()(),i(17,"div",11)(18,"p-dialog",12),O("visibleChange",function(V){return c(l),Q(t.visible,V)||(t.visible=V),m(V)}),i(19,"form",13),b("ngSubmit",function(){return c(l),m(t.onSubmit())}),k(20,Ve,5,9,"div",14,S),n(),D(22,De,10,0,"ng-template",null,0,z),n()()}e&2&&(s(10),L(t.normalBuildings),s(5),L(t.hotelBuildings),s(3),H(g(5,be)),U("visible",t.visible),f("modal",!0),s(),f("formGroup",t.form),s(),L(W(12,Se,g(6,ve),g(7,xe),g(8,_e),g(9,we),g(10,ye),g(11,Ce))))},dependencies:[Y,te,ee,de,ue,oe,ie,re,ne,le,se,J,K]})};export{me as ListComponent};
