import{a as h}from"./chunk-7V6ATNCQ.js";import{_ as T}from"./chunk-IWL4SBPM.js";import{c as I}from"./chunk-S5MVYYKB.js";import{d as k,v as g}from"./chunk-H7UAIGYQ.js";import{Ma as l,_ as f,da as p}from"./chunk-L7ST2L6E.js";var v=(()=>{class s{constructor(e,t){this.document=e,this.platformId=t,this.documentIsAccessible=g(this.platformId)}static getCookieRegExp(e){let t=e.replace(/([\[\]{}()|=;+?,.*^$])/gi,"\\$1");return new RegExp("(?:^"+t+"|;\\s*"+t+")=(.*?)(?:;|$)","g")}static safeDecodeURIComponent(e){try{return decodeURIComponent(e)}catch{return e}}check(e){return this.documentIsAccessible?(e=encodeURIComponent(e),s.getCookieRegExp(e).test(this.document.cookie)):!1}get(e){if(this.documentIsAccessible&&this.check(e)){e=encodeURIComponent(e);let i=s.getCookieRegExp(e).exec(this.document.cookie);return i[1]?s.safeDecodeURIComponent(i[1]):""}else return""}getAll(){if(!this.documentIsAccessible)return{};let e={},t=this.document;return t.cookie&&t.cookie!==""&&t.cookie.split(";").forEach(i=>{let[c,n]=i.split("=");e[s.safeDecodeURIComponent(c.replace(/^ /,""))]=s.safeDecodeURIComponent(n)}),e}set(e,t,i,c,n,u,d,R){if(!this.documentIsAccessible)return;if(typeof i=="number"||i instanceof Date||c||n||u||d){let m={expires:i,path:c,domain:n,secure:u,sameSite:d||"Lax",partitioned:R};this.set(e,t,m);return}let a=encodeURIComponent(e)+"="+encodeURIComponent(t)+";",o=i||{};if(o.expires)if(typeof o.expires=="number"){let m=new Date(new Date().getTime()+o.expires*1e3*60*60*24);a+="expires="+m.toUTCString()+";"}else a+="expires="+o.expires.toUTCString()+";";o.path&&(a+="path="+o.path+";"),o.domain&&(a+="domain="+o.domain+";"),o.secure===!1&&o.sameSite==="None"&&(o.secure=!0,console.warn(`[ngx-cookie-service] Cookie ${e} was forced with secure flag because sameSite=None.More details : https://github.com/stevermeister/ngx-cookie-service/issues/86#issuecomment-597720130`)),o.secure&&(a+="secure;"),o.sameSite||(o.sameSite="Lax"),a+="sameSite="+o.sameSite+";",o.partitioned&&(a+="Partitioned;"),this.document.cookie=a}delete(e,t,i,c,n="Lax"){if(!this.documentIsAccessible)return;let u=new Date("Thu, 01 Jan 1970 00:00:01 GMT");this.set(e,"",{expires:u,path:t,domain:i,secure:c,sameSite:n})}deleteAll(e,t,i,c="Lax"){if(!this.documentIsAccessible)return;let n=this.getAll();for(let u in n)n.hasOwnProperty(u)&&this.delete(u,e,t,i,c)}static{this.\u0275fac=function(t){return new(t||s)(p(k),p(l))}}static{this.\u0275prov=f({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();var x=class s{constructor(r,e,t){this.Http=r;this.Router=e;this.cookieService=t}accessTokenKey="accessToken";refreshTokenKey="refreshToken";userIdKey="userId";SignIn(r){return this.Http.post(`${h.apiUrl}authentication/sign-in`,r)}saveTokens(r){this.cookieService.set("accessToken",r.data.accessToken),this.cookieService.set("refreshToken",r.data.refreshToken.tokenString),this.cookieService.set("userId",r.data.userId)}getAccessToken(){return this.cookieService.get("accessToken")||null}refreshToken(){let r=this.getAccessToken(),e=this.getRefreshToken(),t=new FormData;return t.append("AccessToken",r??""),t.append("RefreshToken",e??""),this.Http.post(`${h.apiUrl}authentication/refresh-token`,t)}getRefreshToken(){return this.cookieService.get("refreshToken")||null}logout(){this.cookieService.delete("accessToken"),this.cookieService.delete("refreshToken"),this.cookieService.delete("userId"),this.Router.navigate(["/Auth/Sign-In"])}isLoggedIn(){return!!this.getAccessToken()}static \u0275fac=function(e){return new(e||s)(p(I),p(T),p(v))};static \u0275prov=f({token:s,factory:s.\u0275fac,providedIn:"root"})};export{x as a};
