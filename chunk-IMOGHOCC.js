import{a as ce}from"./chunk-7P5BYVBI.js";import{a as ue}from"./chunk-7NUBFGVZ.js";import{a as te}from"./chunk-N2UXE5JM.js";import"./chunk-4Q2W5OVW.js";import{b as ie,c as f,e as ne,f as re,j as oe,k as ae,l as le,m as se,o as me,q as de}from"./chunk-WKK5CIJC.js";import"./chunk-HU6ZAMQI.js";import{a as Z}from"./chunk-7V6ATNCQ.js";import{j as ee}from"./chunk-GMBUURGQ.js";import"./chunk-YXJH3ISK.js";import"./chunk-4YRY4IP2.js";import{L as Y,d as D}from"./chunk-3VOWKBRD.js";import"./chunk-NK2LPGPD.js";import"./chunk-OHOHCTIU.js";import{c as X}from"./chunk-PHQ2NZ6G.js";import{k as K,m as Q}from"./chunk-LHMFIFZQ.js";import{Ab as g,Db as N,Fb as A,Gb as H,Ib as z,Jb as G,Kb as n,Lb as o,Mb as x,Qb as C,Tb as b,Ub as d,V as F,Xa as j,_ as V,bb as l,cb as m,dc as s,ea as B,ec as k,fc as v,ia as E,ic as L,jc as P,kc as q,la as M,mc as R,nc as p,oc as O,rb as w,sa as u,ta as c,tc as $,ua as y,va as S,wc as U,xc as W,zc as J}from"./chunk-6VXWZSYY.js";var I=class t{constructor(i){this.sanitizer=i}transform(i){if(!i)return"";let e=i.replace(/\\/g,"");return e=e.replace(/width="[^"]*"/g,""),e=e.replace(/height="[^"]*"/g,""),e=e.replace(/<iframe([^>]*)>/,'<iframe class="w-full h-full"$1>'),this.sanitizer.bypassSecurityTrustHtml(e)}static \u0275fac=function(e){return new(e||t)(m(D,16))};static \u0275pipe=M({name:"removeBackslashes",type:t,pure:!0,standalone:!0})};var T=class t{http=B(X);constructor(){}getBuildDetailsById(i){return this.http.get(`${Z.apiUrl}buildings/${i}`)}static \u0275fac=function(e){return new(e||t)};static \u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"})};var ve=()=>({width:"25rem"}),be=()=>({name:"Name",label:"Name",type:"text"}),he=()=>({name:"Description",label:"Description",type:"text"}),_e=()=>({name:"AddressInDetails",label:"Address In Details",type:"text"}),ye=()=>({name:"MapSearchText",label:"Map Search Text",type:"text"}),Se=()=>({name:"Type",label:"Type (Integer) only 0 or 1 ",type:"number"}),we=()=>({name:"VillageId",label:"Village ID (Integer)",type:"number"}),Ce=(t,i,e,r,a,h)=>[t,i,e,r,a,h],De=t=>({"border-red-500":t});function Ie(t,i){if(t&1){let e=C();n(0,"section",1)(1,"button",7),b("click",function(){u(e);let a=d();return c(a.showDialog())}),y(),n(2,"svg",8),x(3,"path",9),o(),s(4," Update "),S(),x(5,"span",10),o(),n(6,"div",11)(7,"div",12)(8,"h2",13),s(9),o(),n(10,"span",14),s(11),o()(),n(12,"p",15),s(13),o(),n(14,"div",16)(15,"div",17)(16,"h4",18),s(17,"\u{1F4CD} \u0627\u0644\u0639\u0646\u0648\u0627\u0646:"),o(),n(18,"p",19),s(19),o()(),n(20,"div")(21,"h4",18),s(22,"\u{1F3D8}\uFE0F \u0627\u0644\u0642\u0631\u064A\u0629:"),o(),n(23,"p",19),s(24),o()()(),n(25,"div",20)(26,"div",21),x(27,"div",22),U(28,"removeBackslashes"),o()()()()}if(t&2){let e=d();l(9),v("\u{1F3E2} ",e.details.name,""),l(2),v(" \u0646\u0648\u0639: ",e.details.type," "),l(2),v(" ",e.details.description," "),l(6),k(e.details.address),l(5),k(e.details.villageName),l(3),g("innerHTML",W(28,6,e.details.mapSearchText),j)}}function Te(t,i){t&1&&(n(0,"div",2)(1,"div",23),s(2," \u062C\u0627\u0631\u064A \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u062A\u0641\u0627\u0635\u064A\u0644... "),o()())}function ke(t,i){if(t&1&&(n(0,"div",27),s(1),o()),t&2){let e=d().$implicit;l(),v(" ",e.label," is required. ")}}function Fe(t,i){if(t&1&&(n(0,"div",6)(1,"label",24),s(2),o(),x(3,"input",25),w(4,ke,2,1,"div",26),o()),t&2){let e=i.$implicit,r=d();l(),g("for",e.name),l(),v(" ",e.label," "),l(),g("type",e.type)("id",e.name)("formControlName",e.name)("ngClass",O(7,De,r.f[e.name].invalid&&(r.f[e.name].dirty||r.f[e.name].touched))),l(),g("ngIf",r.f[e.name].invalid&&(r.f[e.name].dirty||r.f[e.name].touched))}}function Ve(t,i){if(t&1){let e=C();n(0,"button",28),b("click",function(){u(e);let a=d();return c(a.visible=!1)})("click",function(){u(e);let a=d();return c(a.form.reset())}),y(),n(1,"svg",29),x(2,"path",30),o(),S(),n(3,"span",31),s(4,"Cancel"),o()(),n(5,"button",32),b("click",function(){u(e);let a=d();return c(a.visible=!1)})("click",function(){u(e);let a=d();return c(a.onSubmit())}),y(),n(6,"svg",33),x(7,"path",34),o(),S(),n(8,"span",31),s(9,"Save"),o()()}}var fe=class t{constructor(i,e,r,a,h,_){this.route=i;this.builddetails=e;this.sanitizer=r;this.fb=a;this.CraetebuildService=h;this.ToastService=_;this.form=this.fb.group({BuildingId:[""],Name:["",f.required],Description:["",f.required],AddressInDetails:["",f.required],MapSearchText:[""],Type:[null,[f.required,f.pattern("^[0-1]+$")]],VillageId:[null,[f.required,f.pattern("^[0-9]+$")]]})}buildingId;details;loading=!0;safeMapHtml;visible=!1;form;showDialog(){this.visible=!0}get f(){return this.form.controls}onSubmit(){if(this.form.valid){let i=new FormData;for(let e in this.form.value)i.append(e,this.form.value[e]);this.CraetebuildService.UpdateBuild(i).subscribe({next:e=>{this.ToastService.success("Success","Building details updated successfully"),this.visible=!1,console.log(e)}})}else this.form.markAllAsTouched()}ngOnInit(){this.buildingId=+this.route.snapshot.paramMap.get("buildId"),this.builddetails.getBuildDetailsById(this.buildingId).pipe(F({next:i=>{this.details=i.data,this.details&&(this.safeMapHtml=this.sanitizer.bypassSecurityTrustHtml(this.details.mapSearchText.replace(/\\/g,"")),this.form.patchValue({BuildingId:this.details.buildingId,Name:this.details.name,Description:this.details.description,AddressInDetails:this.details.address,MapSearchText:this.details.mapSearchText,Type:this.details.type==="Normal"?0:1,VillageId:this.details.villageName})),this.loading=!1},error:i=>{console.error("Error fetching building details:",i),this.loading=!1}})).subscribe()}static \u0275fac=function(e){return new(e||t)(m(Y),m(T),m(D),m(se),m(ue),m(ce))};static \u0275cmp=E({type:t,selectors:[["app-details"]],standalone:!0,features:[R],decls:9,vars:20,consts:[["footer",""],[1,"mx-3"],[1,"flex","items-center","justify-center","min-h-[500px]"],[1,"flex","justify-center","card"],[3,"visibleChange","visible","modal"],[1,"max-w-3xl","p-8","mx-auto","space-y-6","bg-white","shadow-2xl","rounded-3xl",3,"ngSubmit","formGroup"],[1,"space-y-2"],["type","button",1,"relative","inline-flex","items-center","justify-center","gap-2","px-6","py-3","text-base","font-semibold","text-white","transition-all","duration-300","ease-in-out","shadow-lg","rounded-2xl","bg-gradient-to-r","from-blue-500","via-indigo-600","to-purple-600","hover:from-blue-600","hover:to-purple-700","hover:scale-105","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-indigo-400",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","2","stroke","currentColor",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","d","M4 4v5h.582a2.5 2.5 0 011.768.732L10 14.5a2.5 2.5 0 001.768.732H16v-2M20 20l-4-4m0 0l-4-4m4 4H8"],[1,"absolute","w-1/2","h-1","transform","-translate-x-1/2","bg-white","rounded","-bottom-1","left-1/2","opacity-20","blur-sm"],[1,"p-6","mx-auto","mt-10","bg-white","shadow-2xl","rounded-2xl","animate-fade-in"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-3xl","font-bold","text-indigo-700"],[1,"px-4","py-1","text-sm","font-semibold","text-indigo-600","bg-indigo-100","rounded-full"],[1,"mb-4","text-lg","text-gray-700"],[1,"flex","flex-col","mb-6","md:flex-row","md:items-center","md:justify-between"],[1,"mb-4","md:mb-0"],[1,"font-semibold","text-gray-600","text-md"],[1,"text-gray-800"],[1,"mt-6","overflow-hidden","border","border-gray-200","shadow-lg","rounded-xl"],[1,"w-full","h-[400px]"],[1,"w-full","h-full",3,"innerHTML"],[1,"text-xl","font-semibold","text-indigo-600","animate-pulse"],[1,"block","text-sm","font-bold","text-gray-700",3,"for"],[1,"w-full","px-4","py-3","transition","duration-300","border","border-gray-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-indigo-500",3,"type","id","formControlName","ngClass"],["class","text-sm text-red-500",4,"ngIf"],[1,"text-sm","text-red-500"],[1,"inline-flex","items-center","justify-center","px-6","py-3","text-gray-700","transition","duration-200","ease-in-out","bg-gray-200","shadow-sm","cursor-pointer","hover:bg-gray-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-gray-400",3,"click"],["fill","none","stroke","currentColor","stroke-width","2","viewBox","0 0 24 24",1,"w-5","h-5","mr-2","text-gray-600","transition-transform","duration-300","transform","group-hover:scale-110"],["stroke-linecap","round","stroke-linejoin","round","d","M6 18L18 6M6 6l12 12"],[1,"text-sm","font-semibold","tracking-wide","uppercase"],["type","submit",1,"relative","inline-flex","items-center","justify-center","px-6","py-3","text-white","transition","duration-300","ease-in-out","shadow-md","cursor-pointer","rounded-xl","hover:shadow-lg","group","focus:outline-none","focus:ring-4","focus:ring-blue-300",2,"background-color","#012a5b",3,"click"],["fill","none","stroke","currentColor","stroke-width","2","viewBox","0 0 24 24",1,"w-5","h-5","mr-2","transition-transform","duration-300","transform","group-hover:scale-110"],["stroke-linecap","round","stroke-linejoin","round","d","M5 13l4 4L19 7"]],template:function(e,r){if(e&1){let a=C();w(0,Ie,29,8,"section",1)(1,Te,3,0,"div",2),n(2,"div",3)(3,"p-dialog",4),q("visibleChange",function(_){return u(a),P(r.visible,_)||(r.visible=_),c(_)}),n(4,"form",5),b("ngSubmit",function(){return u(a),c(r.onSubmit())}),z(5,Fe,5,9,"div",6,H),o(),w(7,Ve,10,0,"ng-template",null,0,J),o()()}e&2&&(A(r.loading?1:0),l(3),N(p(6,ve)),L("visible",r.visible),g("modal",!0),l(),g("formGroup",r.form),l(),G($(13,Ce,p(7,be),p(8,he),p(9,_e),p(10,ye),p(11,Se),p(12,we))))},dependencies:[I,te,ee,de,me,oe,ie,ne,re,ae,le,K,Q]})};export{fe as DetailsComponent};
