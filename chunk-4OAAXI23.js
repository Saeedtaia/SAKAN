import{Z as i,k as a}from"./chunk-N7GQXRRL.js";var o=class s{loadingCount=0;loadingSubject=new a(!1);loading$=this.loadingSubject.asObservable();show(){this.loadingCount++,this.loadingCount===1&&this.loadingSubject.next(!0)}progressSubject=new a(0);progress$=this.progressSubject.asObservable();setProgress(t){this.progressSubject.next(Math.min(100,Math.max(0,t)))}hide(){this.loadingCount=Math.max(0,this.loadingCount-1),this.loadingCount===0&&this.loadingSubject.next(!1)}requests=new Map;startRequest(t){this.requests.set(t,0),this.loadingCount++,this.loadingSubject.next(!0)}updateProgress(t,e){this.requests.has(t)&&(this.requests.set(t,e),this.calculateTotalProgress())}completeRequest(t){this.requests.delete(t),this.loadingCount=Math.max(0,this.loadingCount-1),this.calculateTotalProgress(),this.loadingCount===0&&this.loadingSubject.next(!1)}calculateTotalProgress(){let t=Array.from(this.requests.values()),e=t.reduce((n,l)=>n+l,0),r=t.length>0?e/t.length:0;this.progressSubject.next(r)}static \u0275fac=function(e){return new(e||s)};static \u0275prov=i({token:s,factory:s.\u0275fac,providedIn:"root"})};export{o as a};
